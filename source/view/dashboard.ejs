<!DOCTYPE html>
<html>
<head>
    <title>Dashboard</title>
    <script type='text/javascript' src='http://ajax.aspnetcdn.com/ajax/jQuery/jquery-2.2.0.min.js'></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/js-cookie/2.1.0/js.cookie.min.js"></script>
    <script type="text/javascript" src="https://cdn.socket.io/socket.io-1.4.5.js"></script>
</head>
<body>

<!-- Latest compiled and minified CSS -->
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
<input id="uid" type="hidden" value="<%= user.id %>">

User is: <%= user.name %>
<br>
<h3>Modules</h3>
<div id="tutorials"></div>

<script type="application/javascript">

    function syncIVLE() {
        $.ajax({
            type:'POST',
            url:'/api/dashboard/forceSyncIVLE',
            data:{
                //'token':$('#token').val()
            },
            dataType:'json',
            success: function(data){
                if (data.success){
                    console.log("sync success");
                }
                else {  
                    console.log('sync failed, err: ' +data.message);
                }

            }
        });
    }

    
    function getTutorials() {
        $.ajax({
            type: 'POST',
            url: '/api/dashboard/getTutorials',
            data: { },
            dataType: 'json',
            success: function(data) {
                showTutorials(data.data);
            }
        });
    }

    function showTutorials(tutorials) {
        console.log(tutorials.toString());
        for (i = 0; i < tutorials.length; i++) {
            $('#tutorials').append(tutorials[i].coursecode + "<br>");
        }
    }
    
    /*
    $('#sync-ivle').click(function() {
        syncIVLE();
    });

    $('#get-mods').click(function() {
        getTutorials();
    });
    */

    syncIVLE();
    getTutorials();
    showTutorials();



</script> 


</body>
</html>

<style>

</style>